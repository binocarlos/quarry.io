#!/usr/bin/env node

/**
 * Module dependencies.
 */

var program = require('commander');
var async = require('async');
var eyes = require('eyes');
var colors = require('colors');
var version = require('../package.json').version;
var io = require('../');


tools.banner('quarry.io ' + version);

program
  .version(version)
  .option('-m, --mode <development|local|cloud>', 'the style of network to run', './')
  .option('-n, --network <folder>', 'the location of the network folder', './')

program
  .command('start')
  .description('start a quarry network')
  .action(function(){


    var stack = stackFactory(program.trim, config);

    function boot(){
      stack.start(function(){
        tools.logevent('stack started');
      })
    }

    /*

      we build the code if we are running in production mode

     */
     
    if(stack.production()){
      buildtool(boot);
    }
    else{
      boot();
    }

  })

program
  .command('stop')
  .description('stop the linux stack')
  .action(function(env){
    tools.logevent('STOP');
  })

program
  .command('*')
  .action(function(command){
    console.log('command: "%s" not found', command);
  })

program.parse(process.argv);